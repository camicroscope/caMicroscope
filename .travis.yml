os: linux
dist: xenial
language: node_js
node_js:
   - "12"
install:
    - npm ci
    - npm install jsdom
    - npm install -g http-server
    - npm install -g mocha
    - npm install -g eslint

env:
  - ACTION=LINT

stages:
  - test
  - name: lint
    if: env(ACTION) = "LINT"

before_script:
  - http-server -s & # start a Web server
  - sleep 3 # give Web server some time to bind to sockets, etc
  
jobs:
  include:
    - stage: lint
      name: "Code Style Check"
      script: eslint *.js

script:
  - mocha test --recursive --exit
